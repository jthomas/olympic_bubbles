<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Olympics 2012 :: DataSift</title>
        <link rel="stylesheet" type="text/css" href="css/style.css"></link>
        <script src="js/require/require.js"></script>
        <script src="js/d3/d3.v2.js"></script>
        <script>
            requirejs.config({
                paths: {
                    "d3": "js/d3/d3.v2",
                    "compose": "js/compose",
                    "datasift": "js/datasift",
                    "domReady": "js/require/domReady",
                    "dojo": "js/dojo"
                },
                shim: {
                    "d3": {
                        exports: "d3"
                    }
                }
            });

            require(["datasift/OlympicBubbles", "datasift/TweetMonitor", "domReady!"], function (OlympicBubbles, TweetMonitor) {
                var stream_hash = "76601411d0ab45a89439b762f4bed120",
                    username = "thomasj",
                    api_key = "8a20494e301e6f654684e1c5a9f916e6";

                var tm = new TweetMonitor("ws://websocket.datasift.com/" + stream_hash + "?username=" + username + "&api_key=" + api_key);
                var open = false;
                document.getElementById("toggle").addEventListener("click", function () {
                    tm[open ? "stop" : "start"]();
                    open = !open;
                });

                var bubbles = new OlympicBubbles(document.getElementById("chart"));
            });
  }
    </script>
    </head>
    <body>
        <button id="toggle">Toggle Stream...</button>
    <div id="chart">
    </div>
        
    </body>
</html>
